<!DOCTYPE html>
<html lang="vi-vn">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python'><title>Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python</title>

<link rel='canonical' href='https://cngthnh.github.io/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python'>
<meta property='og:description' content='Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python'>
<meta property='og:url' content='https://cngthnh.github.io/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/'>
<meta property='og:site_name' content='@cngthnh | tech for noobs'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Tech' /><meta property='article:tag' content='Web' /><meta property='article:tag' content='Data' /><meta property='article:tag' content='Python' /><meta property='article:tag' content='BS4' /><meta property='article:published_time' content='2020-12-29T18:23:11&#43;07:00'/><meta property='article:modified_time' content='2020-12-29T18:23:11&#43;07:00'/><meta property='og:image' content='https://cngthnh.github.io/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/web-scraping.png' />
<meta name="twitter:title" content="Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python">
<meta name="twitter:description" content="Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://cngthnh.github.io/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/web-scraping.png' />
    <link rel="shortcut icon" href="favicon.png" />
<style>
		
    :root {
        --base-font-family: "Open Sans", var(--sys-font-family), var(--zh-font-family), sans-serif;
    }
</style>

<script>
		(function () {
		    const customFont = document.createElement('link');
		    customFont.href = "https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap";
		
		    customFont.type = "text/css";
		    customFont.rel = "stylesheet";
		
		    document.head.appendChild(customFont);
		}());
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-VFR9SQNDML', 'auto');
ga('send', 'pageview');
</script>
    </head>
    <body class="">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.body.dataset.scheme = 'dark';
        } else {
            document.body.dataset.scheme = 'light';
        }
    })();
</script><div class="container main-container flex on-phone--column extended article-page with-toolbar">
            <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huc48fc8d7c4ef11d188add92da5e004a1_4116_300x0_resize_box_2.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">👾</span>
                
            </figure>
        
        <h1 class="site-name"><a href="https://cngthnh.github.io">@cngthnh | tech for noobs</a></h1>
        <h2 class="site-description">Imma noob trying to figure out what data is</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Trang chủ</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>Thông tin</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Lưu trữ</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Tìm kiếm</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>Dark Mode</span>
            </li>
        
    </ol>
</aside>

            <main class="main full-width">
    <div id="article-toolbar">
        <a href="https://cngthnh.github.io" class="back-home">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



            <span>Back</span>
        </a>
    </div>

    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/">
                <img src="/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/web-scraping_hu0415db244d56b636a3f6430cd0e86e7e_11218_800x0_resize_box_2.png"
                        srcset="/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/web-scraping_hu0415db244d56b636a3f6430cd0e86e7e_11218_800x0_resize_box_2.png 800w, /p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/web-scraping_hu0415db244d56b636a3f6430cd0e86e7e_11218_1600x0_resize_box_2.png 1600w"
                        width="800" 
                        height="550" 
                        loading="lazy"
                        alt="Featured image of post Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/tech/" style="background-color: #c77d21; color: #fff;">
                Tech
            </a>
        
            <a href="/categories/python/" >
                Python
            </a>
        
            <a href="/categories/tutorial/" style="background-color: #00a8c8; color: #fff;">
                Tutorial
            </a>
        
            <a href="/categories/data/" style="background-color: #ff6791; color: #fff;">
                Data
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/web-scraping-cao-du-lieu-tu-mot-trang-web-voi-python/">Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python</a>
    </h2>

    
    <h3 class="article-subtitle">
        Web Scraping: Cào dữ liệu từ một trang web với BeautifulSoup 4 và Python
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Dec 29, 2020</time>
    </footer></div>
</header>

    <section class="article-content">
    <h2 id="scraping-là-gì">Scraping là gì?</h2>
<p style='text-align: justify;'>Scraping đơn giản là trích xuất thông tin từ một hệ thống, cơ sở dữ liệu hoặc trang web... nào đó. Khác với crawling, scraping không thu thập toàn bộ thông tin mà chỉ thu thập những thông tin phù hợp với mục đích của người lập trình. Trong quá trình scrap, chúng ta vừa cần thu thập dữ liệu, vừa trích xuất dữ liệu (data extraction) để loại bỏ các thành phần không cần thiết và chỉ để lại dữ liệu đã làm sạch phù hợp với mục đích.</p>
<h2 id="trước-khi-bắt-đầu-scrap">Trước khi bắt đầu scrap</h2>
<p style='text-align: justify;'>Chúng ta cần quan tâm trang web có bật cơ chế chặn bot hay không. Nếu có chúng ta cần có các biện pháp đối phó đối với từng cơ chế phát hiện:</p>
<ul>
<li>Quá nhiều request từ cùng một IP =&gt; sử dụng các IP rotator cho mỗi request (Ex: StormProxies&hellip;)</li>
<li>Phát hiện không hỗ trợ JS =&gt; sử dụng các headless browser (trình duyệt không có giao diện người dùng) như Selenium, Puppeteer&hellip;</li>
<li>Cloudflare, sử dụng cookie, captcha để chặn bot: cái này mình chịu :&lt;</li>
</ul>
<h2 id="bắt-đầu-thôi">Bắt đầu thôi</h2>
<p style='text-align: justify;'>Để demo, mình sẽ scrap dữ liệu từ trang web tra cứu điểm thi của báo điện tử 24h. Có thể dùng các công cụ như Jupyter Notebook hoặc Google Colab để chạy demo này.</p>
<p style='text-align: justify;'>Trong demo này mình sẽ cần import các thư viện cần thiết là <b>pandas, requests, bs4, numpy</b></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> requests
<span style="color:#f92672">import</span> pandas
<span style="color:#f92672">import</span> bs4
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
</code></pre></div><p style='text-align: justify;'>Sử dụng công cụ DevTools của Chromium (nhấn nút F12). Nhận thấy thông tin ta cần scrap nằm ở tab 	<b>&lt;tr&gt;</b> thứ 3, ta sẽ parse HTML ở tab này để lấy ra điểm ở các tab 	<b>&lt;td&gt;</b></p>
<p><img src='devtools-tr-tab.png'></img></p>
<p style='text-align: justify;'>Ở đây mình sẽ ghi kết quả xuống file JSON để tiện dùng sau này. Thư viện pandas cho phép ghi dataframe xuống ở định dạng JSON hoặc CSV cực kì tiện lợi.</p>
<h5 id="source-code">Source Code:</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://diemthi.24h.com.vn/?v_page=1&amp;v_cum_thi=00&amp;v_sbd=&#39;</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getPageContent</span>(url, id):
  page <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url<span style="color:#f92672">+</span>id)
  <span style="color:#66d9ef">return</span> bs4<span style="color:#f92672">.</span>BeautifulSoup(page<span style="color:#f92672">.</span>text,<span style="color:#e6db74">&#34;html.parser&#34;</span>)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fieldCleaner</span>(field):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(field)):
        <span style="color:#66d9ef">if</span> ((field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\r</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">&amp;</span>(field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">&amp;</span>(field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39; &#39;</span>)):
            field<span style="color:#f92672">=</span>(field)[j:]
            <span style="color:#66d9ef">break</span>
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(field)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">if</span> ((field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\r</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">&amp;</span>(field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">&amp;</span>(field[j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39; &#39;</span>)):
            field<span style="color:#f92672">=</span>(field)[:j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]
            <span style="color:#66d9ef">break</span>
    <span style="color:#66d9ef">return</span>(field)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">removeDup</span>(field):
    field <span style="color:#f92672">=</span> str(field)
    j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">while</span> (j<span style="color:#f92672">&lt;</span>len(field)):
        <span style="color:#66d9ef">if</span> (field[j]<span style="color:#f92672">==</span>field[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]):
            field <span style="color:#f92672">=</span> field[:(j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)]<span style="color:#f92672">+</span>field[j:]
            j<span style="color:#f92672">=</span>j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
        j<span style="color:#f92672">=</span>j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">return</span>(field)

id <span style="color:#f92672">=</span> []
birthday <span style="color:#f92672">=</span> []
math <span style="color:#f92672">=</span> []
literature <span style="color:#f92672">=</span> []
fLang <span style="color:#f92672">=</span> []
phys <span style="color:#f92672">=</span> []
chem <span style="color:#f92672">=</span> []
bio <span style="color:#f92672">=</span> []
his <span style="color:#f92672">=</span> []
geo <span style="color:#f92672">=</span> []
civ <span style="color:#f92672">=</span> []
note <span style="color:#f92672">=</span> []
khxh <span style="color:#f92672">=</span> []
khtn <span style="color:#f92672">=</span> []
student_num<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">for</span> sbd <span style="color:#f92672">in</span> range (<span style="color:#ae81ff">1000001</span>,<span style="color:#ae81ff">1100000</span>):
    idstr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{0:08d}&#39;</span><span style="color:#f92672">.</span>format(sbd)
    content <span style="color:#f92672">=</span> getPageContent(url, idstr)
    tr <span style="color:#f92672">=</span> content<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;tr&#39;</span>)
    <span style="color:#66d9ef">if</span> (len(tr)<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>): <span style="color:#66d9ef">continue</span>
    student_num <span style="color:#f92672">=</span> student_num<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
    main <span style="color:#f92672">=</span> bs4<span style="color:#f92672">.</span>BeautifulSoup(str(tr[<span style="color:#ae81ff">2</span>]),<span style="color:#e6db74">&#34;html.parser&#34;</span>)
    mainFields <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;td&#39;</span>)
    mainFields <span style="color:#f92672">=</span> [bs4<span style="color:#f92672">.</span>BeautifulSoup(str(field), <span style="color:#e6db74">&#34;html.parser&#34;</span>) <span style="color:#66d9ef">for</span> field <span style="color:#f92672">in</span> mainFields]
    id<span style="color:#f92672">.</span>append(mainFields[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text)
    id[student_num]<span style="color:#f92672">=</span>fieldCleaner(id[student_num])
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      math<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      math<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      literature<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      literature<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">4</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      fLang<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      fLang<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">5</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      phys<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      phys<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">6</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      chem<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      chem<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">7</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      bio<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      bio<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    
    khtn_avg<span style="color:#f92672">=</span>(phys[student_num]<span style="color:#f92672">+</span>chem[student_num]<span style="color:#f92672">+</span>bio[student_num])<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>
    khtn<span style="color:#f92672">.</span>append(float(<span style="color:#e6db74">&#34;{:.2f}&#34;</span><span style="color:#f92672">.</span>format(khtn_avg)))
    
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">9</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      his<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      his<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">10</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      geo<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      geo<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    temp <span style="color:#f92672">=</span> mainFields[<span style="color:#ae81ff">11</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;td&#39;</span>)<span style="color:#f92672">.</span>text
    <span style="color:#66d9ef">if</span> (temp<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;&#39;</span>):
      civ<span style="color:#f92672">.</span>append(float(temp))
    <span style="color:#66d9ef">else</span>:
      civ<span style="color:#f92672">.</span>append(float(np<span style="color:#f92672">.</span>nan))
    
    khxh_avg<span style="color:#f92672">=</span>(his[student_num]<span style="color:#f92672">+</span>geo[student_num]<span style="color:#f92672">+</span>civ[student_num])<span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>
    khxh<span style="color:#f92672">.</span>append(float(<span style="color:#e6db74">&#34;{:.2f}&#34;</span><span style="color:#f92672">.</span>format(khxh_avg)))
    
df <span style="color:#f92672">=</span> pandas<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;id&#39;</span>:id,
                  <span style="color:#e6db74">&#39;math&#39;</span>:math,
                  <span style="color:#e6db74">&#39;literature&#39;</span>:literature,
                  <span style="color:#e6db74">&#39;foreign lang&#39;</span>:fLang,
                  <span style="color:#e6db74">&#39;history&#39;</span>:his,
                  <span style="color:#e6db74">&#39;geo&#39;</span>:geo,   
                  <span style="color:#e6db74">&#39;civ&#39;</span>:civ,
                  <span style="color:#e6db74">&#39;SS-Mean&#39;</span>:khxh,
                  <span style="color:#e6db74">&#39;phys&#39;</span>:phys,
                  <span style="color:#e6db74">&#39;chem&#39;</span>:chem,
                  <span style="color:#e6db74">&#39;bio&#39;</span>:bio,
                  <span style="color:#e6db74">&#39;NS-Mean&#39;</span>:khtn})
df<span style="color:#f92672">.</span>to_json(<span style="color:#e6db74">&#39;data_points.json&#39;</span>)
</code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/tech/">Tech</a>
        
            <a href="/tags/web/">Web</a>
        
            <a href="/tags/data/">Data</a>
        
            <a href="/tags/python/">Python</a>
        
            <a href="/tags/bs4/">BS4</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Nội dung liên quan</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="has-image">
    <a href="/p/lap-trinh-socket-web-server-don-gian-cpp/">
        
        
            <div class="article-image">
                <img src="/p/lap-trinh-socket-web-server-don-gian-cpp/nullSERVER.d40981c8b85c5e02a05fa07d5a168727_hud5ef50abcd2b6d6a8e726228c1d6e7fb_16531_250x150_fill_box_smart1_2.png" 
                        width="250" 
                        height="150" 
                        loading="lazy" 
                        data-key="lap-trinh-socket-web-server-don-gian-cpp" 
                        data-hash="md5-1AmByLhcXgKgX6B9WhaHJw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Lập trình Socket: Web Server đơn giản bằng C&#43;&#43;</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/thuat-toan-sap-xep/">
        
        
            <div class="article-image">
                <img src="/p/thuat-toan-sap-xep/sort.85e21b59b0e31ce66e7697afc6d82e71_hu9dd4241d01f2a44c27ea4bac44362aa8_27425_250x150_fill_box_smart1_2.png" 
                        width="250" 
                        height="150" 
                        loading="lazy" 
                        data-key="thuat-toan-sap-xep" 
                        data-hash="md5-heIbWbDjHOZudpevxtgucQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Thuật toán sắp xếp</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>


    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2020 @cngthnh | tech for noobs
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.0.1">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
